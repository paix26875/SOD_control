
N10 DEF REAL SetLaser, SetPowder1, SetCarriergas1, SetStirrerSpeed1, SetPowder2, SetCarriergas2, SetStirrerSpeed2
;Laser parameters
N20 DEF REAL FEED,LENGTH,DISTANCE,LAYERHEIGHT,NUMBERLAYERS,WIDTH,WIDTHLAYERS1,WIDTHLAYERS2
N30 DEF REAL STARTX,STARTY,STARTZ,STARTC
N40 DEF REAL COUNTER1,COUNTER2,COUNTER3,COUNTER4,DWELL
N50 DEF REAL APPROACH
N60 DEF REAL POWER, MAXPOWER
N70 MAXPOWER=2000
N80 R1=0

;*****PROGRAM VARIABLES*****
N90 LENGTH=25        ;LENGTH OF WALL
N100 DISTANCE=1.5
N110 FEED=1000         ;FEED RATE IN MM/MIN
N120 DWELL=60           ;DWELL TIME IN SECONDS
N130 APPROACH=5       ;OVER TRAVEL AMOUNT
N150 LAYERHEIGHT=0.7
N160 NUMBERLAYERS=120
N170 WIDTHLAYERS1=18


;START POSITION
N190 STARTX=25
N200 STARTY=37.5
N210 STARTZ=0
N220 STARTC=0

; Settings Parameter Laser
N230 POWER=2000
N240 SetLaser=1600 ;POWER/MAXPOWER*27600 ;2000W ;H52 LASER POWER in mV
N250 SetPowder1=0 ; H53 SPEED POWDER DISC HOPPER 1 in mV 0..1000 => 0..10 U/min
N260 SetCarriergas1=0 ; H54 CARRIER GAS FLOW HOPPER 1 in mV 0..1000 => 0..10 U/min
N270 SetStirrerSpeed1=0 ; H55 STIRRER SPEED HOPPER 1 in mV 0..1000 => 0.. 100 percent
N280 SetPowder2=436 ; H56 SPEED POWDER DISC HOPPER 2 in mV ...1000 => 0..10 U/min
N290 SetCarriergas2=600 ; H57 CARRIER GAS FLOW HOPPER 2 in mV 0..1000 => 0..10 U/min
N300 SetStirrerSpeed2=500 ; H58 STIRRER SPEED HOPPER 2 in mV 0..1000 => 0.. 100 percent
;******************************
N310 STOPRE

N320 G54

N330 DM_RAPID(10) ;RAPID LIMIT IN %

N340 TRAFOOF

N350 G0 G153 Z0 D0
N360 G0 A0 C=DC(0)

;*****TOOL CHANGE*****
;!!!RAPID = 10% FOR LASER TOOL CHANGE!!!
N370 DM_RAPID(10) 
N380 T="LASER"
N390 M6
;*********************

N400 DM_RAPID(10)

N410 G0 G153 Z0 D0
N420 G0 A0 C=DC(STARTC)
;G0 G153 X0 Y0 
N430 D1

N440 STOPRE

;START POSITION
N450 G0 X=STARTX Y=STARTY
N460 G0 Z=STARTZ

N420 LASER_CONTROLLER_PARAM_ID=4
N430 IS_LASER_CONTROLLED=0 

N470 Cladding_Para_on(SetLaser, SetPowder1, SetCarriergas1, SetStirrerSpeed1, SetPowder2, SetCarriergas2, SetStirrerSpeed2)

;*****DEPOSITION_01*****

;//FISRT BLOCK
N480 FOR COUNTER1=1 TO NUMBERLAYERS

N490 FOR COUNTER2=1 TO WIDTHLAYERS1/2

N500 G1 X=IC(APPROACH) F=FEED 
N510 X=IC(LENGTH) M174
N520 X=IC(APPROACH) M175
N540 Y=IC(DISTANCE)
N501 G4 F2
N500 G1 X=IC(-APPROACH) F=FEED 
N510 X=IC(-LENGTH) M174
N520 X=IC(-APPROACH) M175
N540 Y=IC(DISTANCE)
N501 G4 F2

N550 ENDFOR

;//MOVE LAYERHEIGHT + BACK TO START
STOPRE

N570 G0 X=-50  Y=STARTY
N580 G4 F=DWELL  ;DWELL
N581 STOPRE
N570 G0 X=STARTX  Y=STARTY
N560 Z=IC(R0)
N900 ENDFOR

N910 STOPRE

N920 Cladding_Para_off ;RESET CLADDING PARAMETERS

N930 G0 G153 Z0 D0	;Z AXIS MACHINE HOME
N940 STOPRE
 
N950 D1
N960 G0 G153 X620 	;X & Y AXIS WORK HO

N970 M30;END